<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="description" content="Interactive visualisation exploring Victoria's rainfall patterns and reservoir storage trends from 2010 to 2025" />
<meta name="author" content="Rahul Pejathaya (32993226)" />
<title>Victoria's Water Story: Rainfall & Reservoir Storage (2010-2025)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="style.css" />
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
<header>
  <h1>Victoria's Water Story: Rainfall & Reservoir Storage</h1>
  <p class="subtitle">Exploring rainfall and water storage patterns across Victoria (2010-2025)</p>
  <p class="author">By Rahul Pejathaya (32993226) | FIT3179 Data Visualisation 2 | October 2025</p>
</header>

<main>
    <section class="intro">
      <h2>Victoria's Water Crisis and Recovery: A 15-Year Story</h2>
    <p>Victoria experienced dramatic dry and wet periods between 2010-2025. Statewide storage ranged from 3.23 to 12.14 million ML. This analysis reveals a 3-4 month lag between rainfall and storage. Data covers 28 rainfall stations and 66 reservoirs across 17 systems. Victoria serves approximately 7.0 million people (Sept 2024 estimate).</p>
    <p><strong>Station:</strong> Rainfall monitoring site recording monthly precipitation. <strong>Reservoir:</strong> Individual water storage with specific capacity. <strong>System:</strong> Multiple reservoirs operating together for a region.</p>
  </section>

  <div class="grid">
    <section>
      <h2>The Rainfall Divide: Coastal Abundance vs. Inland Scarcity</h2>
      <p class="description">Analysis of 28 stations reveals a coastal-inland gradient. Monthly patterns vary significantly across regions and years. An east-west divide challenges equitable water distribution.</p>
      <div id="v1"></div>
      <p class="insight"><strong>Key Finding:</strong> Coastal and mountain areas receive consistently higher rainfall. Inland regions face persistent water scarcity. Geographic imbalance complicates distribution and planning.</p>
    </section>
    <section>
      <h2>Seasonal Predictability Meets Climate Chaos</h2>
      <p class="description">190 months of rainfall condensed into one view. Winter brings reliable rainfall, spring shows unpredictable extremes. Each cell shows average monthly rainfall across all stations.</p>
      <div id="v5"></div>
      <p class="insight"><strong>Pattern:</strong> Winter (Jun-Aug) averages 49mm, fairly reliable. Spring varies dramatically—October ranged from 7.2mm to 107.1mm. Driest period: Jun 2024-May 2025 averaged just 23.8mm monthly.</p>
    </section>
    <section>
      <h2>System-Level Vulnerability: When Big Doesn't Mean Secure</h2>
      <p class="description">Track water storage across Victoria's major systems. Melbourne holds 1,812,175 ML capacity but dropped below 50% in 2019-2020. <strong>Note: Not all systems have large volumes; some appear small.</strong></p>
      <div id="v3"></div>
      <p class="insight"><strong>Reality:</strong> Melbourne is 14.7% of statewide capacity. Goulburn varied by 2.80 million ML (73% of capacity). Melbourne varied by 1.18 million ML (65%). Smaller systems showed extreme swings: Werribee 9.8-99.1%, Geelong 29.6-100.1%.</p>
    </section>

    <section>
      <h2>The Capacity Paradox: Size vs. Security</h2>
      <p class="description">Examine reservoir size versus storage levels across Victoria. Circle size shows actual stored volume. Bigger isn't always better for water security.</p>
      <div id="v4"></div>
      <p class="insight"><strong>Finding:</strong> Catchment location matters more than size. Smaller storages often maintain higher fullness than larger ones. Conditions vary significantly across reservoirs.</p>
    </section>

    <section class="wide">
      <h2>The 3–4 Month Lag: Why Rainfall Today Means Water Tomorrow</h2>
      <p class="description">Fifteen years of data reveals critical time lag. Precipitation takes time to reach reservoirs. This delay determines water restriction timing.</p>
      <div id="v2"></div>
      <p class="insight"><strong>Key Insight:</strong> Statewide storage responds 3-4 months after rainfall. Example: June 2016 rainfall (~77mm) led to storage rise by September (+3.58M ML). Understanding this lag helps set realistic recovery expectations.</p>
    </section>
  </div>

  <section class="conclusions">
    <h2>Four Lessons for Victoria's Water Future</h2>
    <p><strong>1. Geography matters:</strong> Coastal areas receive more rainfall than inland regions. <strong>2. Capacity isn't everything:</strong> Large systems still show substantial storage swings. <strong>3. Observable lag:</strong> Storage responds 3-4 months after rainfall. <strong>4. Variability:</strong> Spring rainfall varies dramatically year-to-year, requiring flexible planning.</p>
  </section>

  <footer>
    <h3>Data Sources & Methodology</h3>
    <div class="data-sources">
      <p><strong>Rainfall:</strong> <a href="http://www.bom.gov.au/climate/data/index.shtml" target="_blank" rel="noopener">Bureau of Meteorology (BOM) FTP Server - HQ Monthly PRCP dataset</a>, Victoria stations, 2010-2025</p>
      <p><strong>Storage:</strong> <a href="https://www.water.vic.gov.au/our-programs/water-monitoring-and-reporting/current-water-snapshot" target="_blank" rel="noopener">Southern and Western Victoria water storage levels - monthly dataset</a>, 2010-2025</p>
      <p><strong>Processing:</strong> Monthly aggregation, normalized by capacity where indicated</p>
      <p><strong>Context:</strong> Victoria population ~7.0M (Sept 2024). Sources: <a href="https://www.abs.gov.au/statistics/people/population/national-state-and-territory-population/latest-release" target="_blank" rel="noopener">ABS</a>, <a href="https://en.wikipedia.org/wiki/Victoria_(state)" target="_blank" rel="noopener">Wikipedia</a>.</p>
    </div>
    <p class="copyright">© 2025 Rahul Pejathaya (32993226) | FIT3179 Data Visualisation 2, Monash University</p>
  </footer>
</main>

<script>
const opts = {
  actions: false,
  renderer: 'svg',
  patch: (spec) => {
    const next = { ...spec };
    if (next.width === undefined) next.width = 'container';
    next.height = 'container';
    next.autosize = { type: 'fit', contains: 'padding', resize: true };
    return next;
  }
};
function sizeChartToSection(sel, view) {
  const container = document.querySelector(sel);
  if (!container) return;
  const compute = () => {
    const section = container.closest('section');
    const secRect = section?.getBoundingClientRect();
    const totalHeight = secRect ? secRect.height : container.parentElement?.clientHeight || window.innerHeight * 0.7;
    const titleEl = section?.querySelector('h2');
    const descEl = section?.querySelector('.description');
    const insightEl = section?.querySelector('.insight');
    const uiHeight = (titleEl?.offsetHeight || 0) + (descEl?.offsetHeight || 0) + (insightEl?.offsetHeight || 0);
    const controlsEl = container.querySelector('.vega-bindings');
    const controlsH = controlsEl?.offsetHeight || 0;
    let chartRowHeight = container.clientHeight;
    if (!chartRowHeight || chartRowHeight < 50) {
      chartRowHeight = Math.max(200, totalHeight - uiHeight - 24);
    }
    const width = container.clientWidth || (section ? section.clientWidth : window.innerWidth);
    const height = Math.max(200, chartRowHeight - controlsH);
    try { view.width(width).height(height).runAsync(); } catch (e) {}
  };
  compute();
  const ro = new ResizeObserver(compute);
  ro.observe(container);
  const section = container.closest('section');
  if (section) ro.observe(section);
  window.addEventListener('resize', compute, { passive: true });
}
function wireTrendBounds(sel, view) {
  const container = document.querySelector(sel);
  if (!container) return;
  const minInput = container.querySelector('input[name="pYearMin"]');
  const maxInput = container.querySelector('input[name="pYearMax"]');
  if (!minInput || !maxInput) return;
  const clamp = (active) => {
    let min = parseInt(minInput.value, 10);
    let max = parseInt(maxInput.value, 10);
    if (Number.isNaN(min) || Number.isNaN(max)) return;
    if (max < min) {
      if (active === 'min') { max = min; maxInput.value = String(max); try { view.signal('pYearMax', max).runAsync(); } catch {} }
      else { min = max; minInput.value = String(min); try { view.signal('pYearMin', min).runAsync(); } catch {} }
    }
    minInput.max = String(max);
    maxInput.min = String(min);
  };
  clamp();
  minInput.addEventListener('input', () => clamp('min'));
  maxInput.addEventListener('input', () => clamp('max'));
}
const mount = (sel, spec) => vegaEmbed(sel, spec, opts)
  .then(res => { sizeChartToSection(sel, res.view); if (sel === '#v2') wireTrendBounds(sel, res.view); return res; })
  .catch(err => {
    console.error(`Embed failed for ${spec}:`, err);
    const el = document.querySelector(sel);
    if (el) el.innerHTML = `<pre style="color:#b00020">Failed to load ${spec}: ${String(err)}</pre>`;
  });
mount("#v1", "visuals/rainfall_map.json");
mount("#v2", "visuals/rainfall_vs_storage.json");
mount("#v3", "visuals/system_area.json");
mount("#v4", "visuals/reservoir_bubble.json");
mount("#v5", "visuals/rainfall_heatmap.json");
</script>
</body>
</html>

